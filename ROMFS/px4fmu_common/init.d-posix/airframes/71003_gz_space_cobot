#!/bin/sh
#
# @name 3DoF Spacecraft Model
#
# @type 2D Freeflyer with 8 thrusters - Planar motion
#
# @maintainer Andr√© Teixeira <andre.r.teixeira@tecnico.ulisboa.pt>
#

. ${R}etc/init.d/rc.sc_defaults

PX4_SIMULATOR=${PX4_SIMULATOR:=gz}
PX4_GZ_WORLD=${PX4_GZ_WORLD:=default}
PX4_SIM_MODEL=${PX4_SIM_MODEL:=spacecraft_2d}

param set-default SIM_GZ_EN 1

param set-default SENS_EN_GPSSIM 1
param set-default SENS_EN_BAROSIM 1
param set-default SENS_EN_MAGSIM 1

param set-default CA_AIRFRAME 0
param set-default MAV_TYPE 99

param set-default CA_ROTOR_COUNT 6
param set-default CA_R_REV 255

# param set-default FW_ARSP_MODE 1

# Auto to be provided by Custom Airframe
param set-default CA_METHOD 0

param set-default SIM_GZ_EC_FUNC1 101
param set-default SIM_GZ_EC_FUNC2 102
param set-default SIM_GZ_EC_FUNC3 103
param set-default SIM_GZ_EC_FUNC4 104
param set-default SIM_GZ_EC_FUNC5 105
param set-default SIM_GZ_EC_FUNC6 106

param set-default SIM_GZ_EC_MIN1 0
param set-default SIM_GZ_EC_MIN2 0
param set-default SIM_GZ_EC_MIN3 0
param set-default SIM_GZ_EC_MIN4 0
param set-default SIM_GZ_EC_MIN5 0
param set-default SIM_GZ_EC_MIN6 0

param set-default SIM_GZ_EC_MAX1 1100
param set-default SIM_GZ_EC_MAX2 1100
param set-default SIM_GZ_EC_MAX3 1100
param set-default SIM_GZ_EC_MAX4 1100
param set-default SIM_GZ_EC_MAX5 1100
param set-default SIM_GZ_EC_MAX6 1100


# Propellers positions
param set-default CA_ROTOR0_PX 0.0
param set-default CA_ROTOR0_PY -0.1655
param set-default CA_ROTOR0_PZ 0.0
param set-default CA_ROTOR0_KM -0.05  
param set-default CA_ROTOR0_AX -0.818042890710956
param set-default CA_ROTOR0_AY 0.0
param set-default CA_ROTOR0_AZ 0.5751572210772138


param set-default CA_ROTOR1_PX 0.0
param set-default CA_ROTOR1_PY 0.1655
param set-default CA_ROTOR1_PZ 0.0
param set-default CA_ROTOR1_KM 0.05  
param set-default CA_ROTOR1_AX 0.8191299982695545
param set-default CA_ROTOR1_AY 0.0
param set-default CA_ROTOR1_AZ -0.5736079200420091


param set-default CA_ROTOR2_PX 0.1433
param set-default CA_ROTOR2_PY -0.0827
param set-default CA_ROTOR2_PZ 0.0
param set-default CA_ROTOR2_KM 0.05  
param set-default CA_ROTOR2_AX -0.4095653689428518
param set-default CA_ROTOR2_AY 0.709392039827003
param set-default CA_ROTOR2_AZ 0.5736019023615504


param set-default CA_ROTOR3_PX -0.1433
param set-default CA_ROTOR3_PY 0.0827
param set-default CA_ROTOR3_PZ 0.0
param set-default CA_ROTOR3_KM -0.05  
param set-default CA_ROTOR3_AX -0.40957058041672156
param set-default CA_ROTOR3_AY 0.7093890309726535
param set-default CA_ROTOR3_AZ 0.5736019023615503


param set-default CA_ROTOR4_PX 0.1433
param set-default CA_ROTOR4_PY 0.0827
param set-default CA_ROTOR4_PZ 0.0
param set-default CA_ROTOR4_KM -0.05  
param set-default CA_ROTOR4_AX -0.40957058041672156
param set-default CA_ROTOR4_AY -0.7093890309726535
param set-default CA_ROTOR4_AZ 0.5736019023615503


param set-default CA_ROTOR5_PX -0.1433
param set-default CA_ROTOR5_PY -0.0827
param set-default CA_ROTOR5_PZ 0.0
param set-default CA_ROTOR5_KM 0.05  
param set-default CA_ROTOR5_AX -0.409707239158564
param set-default CA_ROTOR5_AY -0.7093101125659198
param set-default CA_ROTOR5_AZ 0.5736019023615504






# Controller Tunings
param set SC_YAWRATE_P 3.335
param set SC_YAWRATE_I 0.87
param set SC_YAWRATE_D 0.15
param set SC_YR_INT_LIM 0.2
param set SC_YAW_P 3.0

param set SPC_POS_P 0.20
param set SPC_VEL_P 6.55
param set SPC_VEL_I 0.0
param set SPC_VEL_D 0.0
param set SPC_VEL_MAX 12.0

